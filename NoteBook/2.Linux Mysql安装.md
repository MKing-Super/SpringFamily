# mysql安装

## 一、通用二进制安装mysql

Linux：CentOS-7-x86_64-DVD-2207-02.iso

Mysql压缩包：mysql-5.7.34-linux-glibc2.12-x86_64.tar.gz

Linux阿里源：Centos-7.repo

1 将 Mysql压缩包 放入  /home

2 创建组和用户

```
[root@localhost home]# groupadd mysql -r -g 306 
[root@localhost home]# useradd -r -g mysql -s /bin/false -u 306 mysql
```

3 解压到/usr/local/

```
[root@localhost home]# tar xf mysql-5.7.34-linux-glibc2.12-x86_64.tar.gz -C /usr/local/
```

4 做软连接

```
[root@localhost home]# ln -sv /usr/local/mysql-5.7.34-linux-glibc2.12-x86_64/ /usr/local/mysql
```

5 修改所属组和所属用户

```
[root@localhost home]# cd /usr/local/mysql
[root@localhost mysql]# chown -R mysql.mysql .*
```

6 编写子配置文件

```
[root@localhost mysql]# vi /etc/profile.d/mysql.sh

export PATH=$PATH:/usr/local/mysql/bin
```

加载配置文件

```
[root@localhost mysql]# source /etc/profile.d/mysql.sh
```

7 做初始化处理（这里有初始密码）

```
[root@localhost mysql]# mysqld --initialize --user=mysql --basedir=/usr/local/mysql --datadir=/usr/local/mysql/data
```

> 密码（ZrA4hsJBqq/5）：2025-07-03T06:21:42.251976Z 1 [Note] A temporary password is generated for root@localhost: ZrA4hsJBqq/5

8 拷贝my.cnf 并进行修改

```
[root@localhost mysql]# vi /etc/my.cnf




[client]
socket=/usr/local/mysql/mysql.sock

[mysqld]
datadir=/usr/local/mysql/data
socket=/usr/local/mysql/mysql.sock
bind-address = 0.0.0.0
# Disabling symbolic-links is recommended to prevent assorted security risks
symbolic-links=0
# Settings user and group are ignored when systemd is used.
# If you need to run mysqld under a different user or group,
# customize your systemd unit file for mariadb according to the
# instructions in http://fedoraproject.org/wiki/Systemd

[mysqld_safe]
log-error=/var/log/mysql.log
pid-file=/usr/local/mysql/data/mysql.pid

#
# include all files from the config directory
#
!includedir /etc/my.cnf.d

```

9 复制mysql.server脚本

```
[root@localhost mysql]# vi /usr/local/mysql/support-files/mysql.server

修改部分

[root@localhost mysql]# cp /usr/local/mysql/support-files/mysql.server /etc/init.d/mysqld
```

修改部分

```

basedir=/usr/local/mysql
datadir=/usr/local/mysql/data

```

添加进程并启动

```
[root@localhost init.d]# chkconfig --add mysqld
 
[root@localhost init.d]# chkconfig mysqld on
```

10 启动mysql

```
[root@localhost init.d]# systemctl start mysqld
[root@localhost mysql]# systemctl status mysqld
```

11 修改密码

```
[root@localhost init.d]# mysqladmin -u root -p'ZrA4hsJBqq/5' password '123456'
```

12 **允许 root 用户远程登录（测试用，生产环境建议创建专用用户）**

```
[root@localhost init.d]# mysql -u root -p

mysql>CREATE USER 'root'@'%' IDENTIFIED BY '123456';
mysql>GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' WITH GRANT OPTION;
mysql>FLUSH PRIVILEGES;
```

13 重启mysql

```
systemctl restart mysqld
```

14 查看Linux防火墙

```
[root@localhost mysql]# firewall-cmd --list-ports | grep 3306
```

如果未开放 3306 端口

```
[root@localhost mysql]# firewall-cmd --add-port=3306/tcp --permanent
[root@localhost mysql]# firewall-cmd --reload
```

